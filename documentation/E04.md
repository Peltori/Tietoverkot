# Dokumentaatio tehtävään E04

# Vyos:n importtaus ja Internal network adapterin lisäys

Alla kuva vyos:n asetuksista virtualboxissa<br/>

![](/documentation/E04/Harjoitus_kuvat/Vyos_importtaus.png)

Adapterin nimi LANx<br/>
MAC address: 08:00:27:79:E7:2F<br/>

# Looginen topologia piirustus

Valitsin seuraavat verkot EO3 harjoituksesta 2 ja 3<br/>

192.168.23.0/26 -> Workstations (tag 5)<br/>
192.168.23.64/26 -> Waitingstations (tag 10)<br/>
10.5.51.0/28 -> network_devices (tag 15)<br/>

Alla kuva loogisesta topologia piirustuksestani<br/>

![]()

# VLAN:n luonti ja päivitys kytkimissä

Alla kuvat kytkimestä 1 ja 2<br/>

Siirretään Lubuntut ensimmäiseen ja toiseen 50 osoitteen aliverkkoon<br/>
tägäämällä ja untagaamalla kytkimien portteja<br/>

![](documentation/E04/Harjoitus_kuvat/Switch1_vlan_waitingstations.png)<br/>

![](documentation/E04/Harjoitus_kuvat/Switch2_vlan_waitingstations.png)<br/>

Switch2:ssa tulee ilmoitus, että port 2 siirrettiin automaattisesti VLAN:sta "workstations" VLANiin "waitingstations" kuten toivoinkin<br/>

# Vyos konffausta

## Laitteiden osoitteistaminen manuaalisesti

Tässä huomasin kuinka laitoin kaksi eri aliverkkoa saman "tagin" eli vyosissa "vif" alle<br/>

![](documentation/E04/Harjoitus_kuvat/Vyos_conf_hupsista.png)<br/>

Tässä sitten korjasin virheeni ja loin eri "tagin" eli "vif" aliverkolle kuten topologia kuvassa on esitetty<br/>

![](documentation/E04/Harjoitus_kuvat/Vyos_conf_hupsista_korjattu.png)<br/>

Tässä konffasin vielä kuvaukset rajapinnoille<br/>

![](documentation/E04/Harjoitus_kuvat/Vyos_conf_kuvaukset.png)<br/>

Tallennetaan välissä<br/>

![](documentation/E04/Harjoitus_kuvat/Vyos_conf_tallennus.png)<br/>

Lopussa tarkastellaan mitä saatiin aikaan<br/>

![](documentation/E04/Harjoitus_kuvat/Vyos_conf_tarkastelu.png)<br/>

Tässä vielä lopputarkastelu kaikista konfiguraatioista<br/>

![](documentation/E04/Harjoitus_kuvat/Vyos_conf_lopullinen.png)<br/>

Varmistetaan vielä "show interfaces" komennolla konfiguraation käyttöönotto<br/>

![](documentation/E04/Harjoitus_kuvat/Vyos_lopputulos.png/)<br/>

Tarkastellaan vielä myös reititystaulu "show ip route" komennolla

![](documentation/E04/Harjoitus_kuvat/Vyos_ip_route_komento.png)<br/>

Nimetään myös reititin

![](documentation/E04/Harjoitus_kuvat/Vyos_nimeaminen.png)

# Lubuntujen osoitteistaminen

Manuaalisesti osoitteistetaan molemmat lubuntut seuraavasti<br/>

![](documentation/E04/Harjoitus_kuvat/Lubuntu1_osoitteistaminen.png)<br/>

![](documentation/E04/Harjoitus_kuvat/Lubuntu2_osoitteistaminen.png)<br/>

Osoitteet piti pakottaa käyttöön klikkaamalla oikeasta alakulmasta "connections" ja sieltä "wired connection 1"<br/>

Tarkastetaan "ip addr" komennolla, että osoitteet tulivat käyttöön<br>

![](documentation/E04/Harjoitus_kuvat/Lubuntu1_osoitteistaminen_ip_addr.png)<br/>

![](documentation/E04/Harjoitus_kuvat/Lubuntu2_osoitteistaminen_ip_addr.png)<br/>


Katsotaan gateway komennolla "route -n" komennolla

![](documentation/E04/Harjoitus_kuvat/Lubuntu1_osoitteistaminen_gateway_route_n.png)<br/>

![](documentation/E04/Harjoitus_kuvat/Lubuntu1_osoitteistaminen_gateway_route_n.png)<br/>

Seuraavaksi kokeillan "ping" komennolla saadaanko yhteys Lubuntu 2 purkista reitittimeen "vyosiin"

![](documentation/E04/Harjoitus_kuvat/Lubuntu2_ping_to_vyos_126.png)

Näyttäisi toimivan moitteetta <br/>

Seuraavaksi kokeilin "pingata" Lubuntu 1 purkkia mutta eihän se toiminut, jotenka korjasin ongelman seuraavasti<br/>

Kuva ongelmasta

![](documentation/E04/Harjoitus_kuvat/Lubuntu2_ping_to_Lubuntu1_ongelma.png)

Kuva korjatusta tilanteesta switch 2 kytkimestä eli lisäsin vaan portin 3 taggedina,<br/>
koska epähuomiossa unohdin sen lisätä.<br/>

![](documentation/E04/Harjoitus_kuvat/Lubuntu2_ping_to_Lubuntu1_korjattu.png)










