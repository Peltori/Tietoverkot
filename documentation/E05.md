# Dokumentaatio tehtävään E05

# Topologiaan päivitykset

Alla päivitetyt topologia piirustukset<br/>

Fyysinen topologia<br/>


Looginen topologia<br/>


# Staattinen reititys

Valitsin seuraavat aliverkot<br/>

50 päätelaitteen verkko -> 192.168.23.128/26<br/>

2 päätelaitteen verkko -> 10.5.51.252/30<br/>

## Reitittimien osoitteistaminen

Alla kuvat Vyos 1 osoitteistamisesta<br/>

/30 maskilla oleva aliverkko<br/>

Määritetään rajapintaan eth1 -> 10.5.51.253/30<br/>

![](documentation/E05/Harjoitus_kuvat/Vyos1_reititys_30.png)<br/>

Tarkistetaan konfiguraatio, kommitoidaan ja tallennetaan muutokset seuraavasti<br/>

![](documentation/E05/Harjoitus_kuvat/Vyos1_reititys_30_tarkistus.png)<br/>

![](documentation/E05/Harjoitus_kuvat/Vyos1_reititys_30_tallennus.png)<br/>

Tarkistetaan vielä, että rajapinta on ylhäällä "show interfaces" komennolla.<br/>

"u/u" kertoo, että rajapinta on pystyssä eli up/up<br/>

![](documentation/E05/Harjoitus_kuvat/Vyos1_reititys_30_show_interfaces.png)<br/>

Alla kuvat Vyos 2 osoitteistamisesta<br/>

Annetaan kuvaukset rajapinnoille niin ei tarvitse muistaa mikä on mikäkin.<br/>

![](documentation/E05/Harjoitus_kuvat/Vyos2_rajapinta_nimeaminen.png)<br/>

Määritetään rajapintaan eth 2 -> 10.5.51.254/30<br/>

![](documentation/E05/Harjoitus_kuvat/Vyos2_reititys_30_26.png)<br/>

Tarkistetaan, kommitoidaan ja tallennetaan konfiguraatio.<br/>

![](/E05/Harjoitus_kuvat/Vyos2_reititys_tarkistus_30_26.png)<br/>

![](/E05/Harjoitus_kuvat/Vyos2_reititys_tallennus_30_26.png)<br/>

## Laitteiden dynaaminen osoitteistaminen

set service dhcp-server shared-network-name VLAN5 subnet 192.168.0.0/24 default-router 192.168.0.254<br/>

    <- oletusyhdeskäytävä komento

set service dhcp-server shared-network-name VLAN5 subnet 192.168.0.0/24 range PCs start 192.168.0.254<br/>

    <- mistä osoitteita aletaan jakelemaan

set service dhcp-server shared-network-name VLAN5 subnet 192.168.0.0/24 range PCs stop 192.168.0.254<br/>

    <- mihin osoitteiden jakeleminen päättyy

# Vyos1

## Konfiguraatiot VLAN:lle workstations (sininen, 192.168.23.0/26)

set service dhcp-server shared-network-name VLAN5 subnet 192.168.23.0/26 default-router 192.168.23.62<br/>

set service dhcp-server shared-network-name VLAN5 subnet 192.168.23.0/26 range PCs start 192.168.23.1<br/>

set service dhcp-server shared-network-name VLAN5 subnet 192.168.23.0/26 range PCs stop 192.168.23.50<br/>

Kuva komennoista<br/>
![](documentation/E05/Harjoitus_kuvat/Vyos1_dhcp_VLAN5.png)<br/>

Tarkistetaan vielä menikö konffaus perille<br/>
![](documentation/E05/Harjoitus_kuvat/Vyos1_dhcp_VLAN5_show.png)<br/>

Hieman oli ongelmia yrittäessäni pingata Lubuntu1 päätelaitteelta reititintä "Vyos1"<br/>
mutta ongelma ilmeisesti korjaantui kun vaihdoin virtualboxista reitittimen adapteri tyypin<br/>
"adapter type" "IntelPRO/1000 MT Desktop" sijasta -> "PCnet-FastIII"<br/>

![](documentation/E05/Harjoitus_kuvat/Virtualbox_adapter_type.png)<br/>

Testataan vielä Lubuntu1 päätelaitteelta "pingata" reititintä "Vyos1"<br/>
![](documentation/E05/Harjoitus_kuvat/Lubuntu1_ping_to_router.png)<br/>

Hyvin näyttäisi toimivan muutoksienkin jälkeen :sunglasses:<br/>

Lopuksi katsotaan vielä "show dhcp server leases" komennolla kuinka kauan työaseman lease aika on<br/>

![](documentation/E05/Harjoitus_kuvat/Vyos1_dhcp_leases.png)
Aika lyhyt lease aika näyttäisi olevan.<br/>


## Konfiguraatiot VLAN:lle waitingstations (oranssi, 192.168.23.64/26)

set service dhcp-server shared-network-name VLAN10 subnet 192.168.23.64/26 default-router 192.168.23.126<br/>

set service dhcp-server shared-network-name VLAN10 subnet 192.168.23.64/26 range PCs start 192.168.23.65<br/>

set service dhcp-server shared-network-name VLAN10 subnet 192.168.23.64/26 range PCs stop 192.168.23.115<br/>

# Vyos1

## Konfiguraatiot LAN5 (192.168.23.0/26)

set service dhcp-server shared-network-name LAN5 subnet 192.168.23.128/30 default-router 192.168.23.129<br/>

set service dhcp-server shared-network-name LAN5 subnet 192.168.23.128/30 range PCs start 192.168.23.130<br/>

set service dhcp-server shared-network-name LAN5 subnet 192.168.23.128/30 range PCs stop 192.168.23.180<br/>

